{{if .Logs}}
<!-- Logs Summary -->
<div class="px-6 py-4 border-b border-gray-700">
    <p class="text-sm text-gray-400">
        Showing {{len .Logs}} of {{formatNumber (toInt64 .Total)}} logs
        {{if gt .TotalPages 1}} (Page {{.Page}} of {{formatNumber (toInt64 .TotalPages)}}){{end}}
    </p>
</div>

<!-- Logs Table -->
<div class="overflow-x-auto">
    <table class="w-full">
        <thead class="bg-gray-750 border-b border-gray-700">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-40">Timestamp</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-24">Scan ID</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-20">Level</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-32">Phase</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Message</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-700">
            {{range .Logs}}
            <tr class="hover:bg-gray-750 transition">
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                    {{formatTimestamp .Timestamp}}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm">
                    <a href="/logs?scan_id={{.ScanID}}" class="text-blue-400 hover:text-blue-300 hover:underline">
                        #{{.ScanID}}
                    </a>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm">
                    {{if eq .Level "error"}}
                    <span class="px-2 py-1 text-xs font-semibold rounded bg-red-900/30 text-red-400 border border-red-800">
                        ERROR
                    </span>
                    {{else if eq .Level "warning"}}
                    <span class="px-2 py-1 text-xs font-semibold rounded bg-amber-900/30 text-amber-400 border border-amber-800">
                        WARNING
                    </span>
                    {{else if eq .Level "debug"}}
                    <span class="px-2 py-1 text-xs font-semibold rounded bg-purple-900/30 text-purple-400 border border-purple-800">
                        DEBUG
                    </span>
                    {{else}}
                    <span class="px-2 py-1 text-xs font-semibold rounded bg-blue-900/30 text-blue-400 border border-blue-800">
                        INFO
                    </span>
                    {{end}}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">
                    {{if .Phase}}{{.Phase}}{{else}}-{{end}}
                </td>
                <td class="px-6 py-4 text-sm text-gray-300">
                    <div class="max-w-3xl wrap-break-word">{{.Message}}</div>
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>

<!-- Pagination -->
{{if gt .TotalPages 1}}
<div class="px-6 py-4 border-t border-gray-700 flex items-center justify-between">
    <div class="text-sm text-gray-400">
        Page {{.Page}} of {{formatNumber (toInt64 .TotalPages)}}
    </div>
    <div class="flex gap-2">
        {{if gt .Page 1}}
        <button data-page="{{sub .Page 1}}"
                class="pagination-btn px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded transition">
            Previous
        </button>
        {{end}}

        <!-- Page numbers -->
        {{$currentPage := .Page}}
        {{$totalPages := .TotalPages}}
        {{range $page := (sequence 1 $totalPages)}}
            {{if or (le $page 3) (and (ge $page (sub $currentPage 1)) (le $page (add $currentPage 1))) (ge $page (sub $totalPages 2))}}
                {{if eq $page $currentPage}}
                <button class="px-3 py-1 bg-blue-600 text-white rounded cursor-default">{{$page}}</button>
                {{else}}
                <button data-page="{{$page}}"
                        class="pagination-btn px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded transition">
                    {{$page}}
                </button>
                {{end}}
            {{else if and (eq $page 4) (gt $currentPage 5)}}
                <span class="px-2 py-1 text-gray-500">...</span>
            {{else if and (eq $page (sub $totalPages 3)) (lt $currentPage (sub $totalPages 4))}}
                <span class="px-2 py-1 text-gray-500">...</span>
            {{end}}
        {{end}}

        {{if lt .Page .TotalPages}}
        <button data-page="{{add .Page 1}}"
                class="pagination-btn px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded transition">
            Next
        </button>
        {{end}}
    </div>
</div>
{{end}}

{{else}}
<!-- No Logs Found -->
<div class="p-12 text-center text-gray-400">
    <div id="logs-empty-icon" class="mx-auto mb-4 text-gray-600"></div>
    <p class="text-xl font-semibold mb-2">No logs found</p>
    <p>Try adjusting your filters or run a scan to generate logs</p>
</div>
<script>
    // Inject file document icon from centralized Icons object
    if (typeof Icons !== 'undefined') {
        const iconElement = document.getElementById('logs-empty-icon');
        if (iconElement) {
            iconElement.innerHTML = Icons.get('fileDocument', 16);
        }
    }
</script>
{{end}}
