# ===========================
# Performance Configuration
# ===========================

database_path: /data/media-finder.db

# Scan Workers: Number of concurrent file processors
# - Default: 10 (good for most systems)
# - Increase to 20-30 for fast NVMe/SSD storage
# - Decrease to 5 for slow/network storage to avoid overwhelming the disk
scan_workers: 10

# Scan Buffer Size: File processing queue buffer
# - Default: 100 (good balance)
# - Increase to 500-1000 for very fast storage
# - Decrease to 50 for systems with limited memory
scan_buffer_size: 100

# API Timeout: Timeout for external service API calls
# - Default: 5m (recommended for large libraries)
# - Note: Actual timeout is 2x this value (10m) to handle pagination/retries
# - Increase to 10m if you have very large libraries (100K+ items per service)
# - Decrease to 2m for smaller, faster services
api_timeout: 5m

# Server Configuration
server_port: 8080
cors_allowed_origin: "http://localhost:8080"  # Set to "*" for development

# Statistics Cache TTL: How long to cache expensive statistics queries
# - Default: 30s
# - Increase to 60s-120s for large databases (100K+ files)
# - Decrease to 10s for smaller databases if you need real-time stats
stats_cache_ttl: 30s

# Database Connection Pool Settings
# - Defaults are optimized for SQLite with WAL mode
# - max_open_conns: Maximum concurrent database connections
# - max_idle_conns: Idle connections kept in pool
# - conn_max_lifetime: Maximum connection lifetime before recycling
db_max_open_conns: 25
db_max_idle_conns: 5
db_conn_max_lifetime: 5m

# Media-finder's own path mappings (service = media-finder's container path, local = host filesystem path)
local_path_mappings:
  - service: /media
    local: /mnt/user/data/media
  - service: /downloads
    local: /mnt/user/data/downloads/torrents

# Each service's path mappings (service = external service's path, local = media-finder's path)
service_path_mappings:
  plex:
    - service: /media
      local: /mnt/user/data/media
  sonarr:
    - service: /tv
      local: /mnt/user/data/media/tv
    - service: /downloads
      local: /mnt/user/data/downloads/torrents
  radarr:
    - service: /movies
      local: /mnt/user/data/media/movies
    - service: /downloads
      local: /mnt/user/data/downloads/torrents
  qbittorrent:
    - service: /downloads
      local: /mnt/user/data/downloads/torrents
  stash:
    - service: /stash
      local: /mnt/user/data/media/stash

services:
  plex:
    url: http://plex:32400
    token: YOUR_PLEX_TOKEN_HERE
    # Optional: Specify library keys to scan (empty = scan all libraries)
    # Use the config page UI to fetch and select specific libraries
    libraries: []
  sonarr:
    url: http://sonarr:8989
    api_key: YOUR_SONARR_API_KEY_HERE
  radarr:
    url: http://radarr:7878
    api_key: YOUR_RADARR_API_KEY_HERE
  qbittorrent:
    url: http://qbittorrent:8080
    username: admin
    password: adminpass
    # Optional: Use qui proxy instead of direct connection
    # qui_proxy_url: http://qui:7476/proxy/YOUR_PROXY_KEY_HERE
  stash:
    url: http://stash:9999
    api_key: YOUR_STASH_API_KEY_HERE

# Paths to scan (as seen by media-finder container)
scan_paths:
  - /media
  - /downloads

